{#include main fluid=true}
{#style}
* {
box-sizing: border-box;
}

.column {
float: left;
padding: 10px;
}

.left {
width: 15%;
}

.right {
width: 85%;
}

.row:after {
content: "";
display: table;
clear: both;
}

.link { 
    background:none; 
    border:none; 
    background-color:#005fff;
    color:#ffffff
}
{/style}

{#script}

function createTopic(){
    var topicName = document.getElementById("create_topic").value;
    $.post("",
        {
            action: "createTopic",
            key: topicName,
            value: "no data"
        },
        function(data, status){
            if(status === "success"){
            console.log("Topic created: "+topicName);
        }else{
            console.error("Error creating topic");
        }
    });
}

function hideAllContentExcept( ex ){
    const allDivs=["topics","partitions","brokers","schema","cgroups","acls","nodes"];
    for (let i = 0; i < allDivs.length; i++) {
        var ename = allDivs[i]; 
        var d = document.getElementById(ename);
        if(d!=null){
            if(ename!==ex){
                d.style.display = "none";
            }else{
                d.style.display = "block";
            }
        }else{
            console.log("Can not find div ",allDivs[i]);
        }
    }
}

function show(id){
    hideAllContentExcept(id);
}

$( document ).ready(function() {
    hideAllContentExcept("topics");
});

{/script}

{#title}Kafka dev UI{/title}
{#body}

<div class="row" style="background-color:#005fff; color:#ffffff">
    <h3>Kafka dev UI</h3>
</div>
<div class="row">
    <div class="column left" style="background-color:#005fff; color:#ffffff">
        <p><button class="link" onclick="show('topics')">Topics</button></p>
        <p><button class="link" onclick="show('partitions')">Partitions</button></p>
        <p><button class="link" onclick="show('brokers')">Brokers</button></p>
        <p><button class="link" onclick="show('schema')">Schema registry</button></p>
        <p><button class="link" onclick="show('cgroups')">Consumer groups</button></p>
        <p><button class="link" onclick="show('acls')">Access control list</button></p>
        <p><button class="link" onclick="show('nodes')">Nodes</button></p>
    </div>
    
    <div class="column right" style="background-color:#ffffff;">

        <div id="topics">
            Kafka topics: <br>
            <ul>
                {#for item in info:kafkaInfos.topics} 
                  <li>
                    Topic: {item} 
                  </li>
                {/for}
            </ul>
            <hr>
            <input type="text" name="key" value="new_topic" id="create_topic">
            <button class="btn btn-primary btn-sm" onclick="createTopic()">Create topic</button>
        </div>     
        
        <div id="partitions">
            Partitions<br>
            Blalalala
        </div>
        
        <div id="brokers">
            Ðšafka broker: {info:kafkaInfos.broker} <br><br>
            Blalalala
        </div>
        
        <div id="schema">
            Schema<br>
            Blalalala
        </div> 
        
        <div id="cgroups">
            Kafka consumer gropus: <br>
            <ul>
                {#for item in info:kafkaInfos.consumerGroups} 
                <li>
                    Topic: {item} 
                </li>
                {/for}
            </ul>
        </div>
        
        <div id="acls">
            ACL<br>
            Blalalala
        </div>
        
        <div id="nodes">
            Kafka nodes: <br>
            <ul>
                {#for item in info:kafkaInfos.nodes} 
                <li>
                    Node: {item} 
                </li>
                {/for}
            </ul>
        </div>

    </div>
</div>
{/body}
{/include}
